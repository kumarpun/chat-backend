/* eslint-disable */
const { check, body, checkSchema, oneOf, validationResult } = require('./check');
const { matchedData } = require('./filter');
const express = require('express');
const bodyParser = require('body-parser');

const app = express();
app.use(bodyParser.json());
app.use(bodyParser.text());

// app.all('/*', [check.body(['foo.*', '*.*.qux'])], (req, res) => {
//   console.log(req.body);
//   const data = matchedData(req);
//   const result = validationResult(req);
//   res.json({
//     data,
//     errors: result.array(),
//   });
// });
//
// app.listen(3001);

async function bla() {
  const req = {
    body: {
      foo: new Array(10000).fill({
        d1: '2019-01-01T05:30:00Z',
        d2: '2019-01-01T05:30:00Z',
      }),
    },
  };

  const c = await check(['foo.*.d1', 'foo.*.d2'])
    .isISO8601()
    .run(req);
}
bla();
